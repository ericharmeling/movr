{% extends 'layout.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
{% if current_user.is_active %}
<p class="text-center">You are logged in as {{ current_user.username }}. Go to the <a href="/vehicles">Vehicles</a> page to start a ride.</p>
{% endif %}
<div class="list-group">
    {% for ride in rides %}
    <a class="list-group-item flex-column align-items-start">
        <h5 class="mb-1">Ride ID: {{ ride.id }}</h5>
        <p>Vehicle ID: {{ ride.vehicle_id }}</p>
        <p>City: <bf class="text-capitalize">{{ ride.city }}</bf></p>
        <p>This ride started {{ ride.start_time }}.</p>
        {% if ride.end_time != None %}
        <p>This ride ended {{ ride.end_time }}.</p>
        {% endif %}
        <div class="d-flex w-100 justify-content-between">
        {% if ride.end_time == None %}
        <p class="alert alert-success text-center" role="alert" style="width: 15rem;">Active</p>
        {% if current_user.id == ride.rider_id %}
        <form class="form form-horizontal" method="POST" action="/rides/end/{{ ride.id }}">
            {{ wtf.form_field(form.submit) }}
        </form>
        {% endif %}
        {% else %}
        <p class="alert alert-warning text-center" role="alert" style="width: 15rem;">Inactive</p>
        {% endif %}
        </div>
    </a>
    {% endfor %}
</div>
{% endblock %}
